<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.0">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Tellery Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Tellery Blog Atom Feed">
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-MEQXXGM2HZ"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-MEQXXGM2HZ",{})</script><title data-react-helmet="true">Question referencing | Tellery</title><meta data-react-helmet="true" property="og:url" content="https://tellery.io/docs/how-to-use/question-referencing"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Question referencing | Tellery"><meta data-react-helmet="true" name="description" content="Copy-pasting code between one-off analyses will leave you a mountain of technical debt. Question referencing allows you abstract essential business logic, and reference it in future analysis. They are the LEGO blocks for your analysis."><meta data-react-helmet="true" property="og:description" content="Copy-pasting code between one-off analyses will leave you a mountain of technical debt. Question referencing allows you abstract essential business logic, and reference it in future analysis. They are the LEGO blocks for your analysis."><link data-react-helmet="true" rel="shortcut icon" href="/img/mask-icon.svg"><link data-react-helmet="true" rel="canonical" href="https://tellery.io/docs/how-to-use/question-referencing"><link data-react-helmet="true" rel="alternate" href="https://tellery.io/docs/how-to-use/question-referencing" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://tellery.io/docs/how-to-use/question-referencing" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.0bbda6ad.css">
<link rel="preload" href="/assets/js/runtime~main.b7950fb1.js" as="script">
<link rel="preload" href="/assets/js/main.625a2d6a.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#main" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle" type="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><img src="/img/icon.svg" alt="My Site Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/icon.svg" alt="My Site Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">Tellery</strong></a><a href="https://github.com/tellery/tellery" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><a class="navbar__item navbar__link" href="/docs">Docs</a><a href="#features" class="navbar__item navbar__link">Features</a></div><div class="navbar__items navbar__items--right"><div class="react-toggle displayOnlyInLargeViewport_GrZ2 react-toggle--disabled" role="button" tabindex="-1"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_71bT">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img src="/img/icon.svg" alt="My Site Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/icon.svg" alt="My Site Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">Tellery</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a href="https://github.com/tellery/tellery" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li><li class="menu__list-item"><a class="menu__link" href="/docs">Docs</a></li><li class="menu__list-item"><a href="#features" class="menu__link">Features</a></li></ul></div></div></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_31aa"><div class="docSidebarContainer_3Kbt" role="complementary"><div class="sidebar_15mo"><div class="menu menu--responsive thin-scrollbar menu_Bmed"><button aria-label="Open menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_fgN0" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/">What is Tellery?</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/available-connectors">Available Connectors</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Getting Started</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/getting-started/overview">Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/getting-started/quick-setup">Quick Setup</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/getting-started/production-setup">Production Setup</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/getting-started/connector-deployment">Connector Deployment</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">How to use Tellery</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/how-to-use/create-story">Create a new story</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/how-to-use/configure-database">Configure a database</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/how-to-use/data-asset">Data asset</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/docs/how-to-use/question-referencing">Question referencing</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/how-to-use/shortcut">Learn the shortcut</a></li></ul></li><li class="menu__list-item"><a class="menu__link" href="/docs/changelog">Changelog</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/about">About</a></li></ul></div></div></div><main class="docMainContainer_3ufF"><div class="container padding-vert--lg docItemWrapper_3FMP"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><header><h1 class="docTitle_3a4h">Question referencing</h1></header><div class="markdown"><p>Copy-pasting code between one-off analyses will leave you a mountain of technical debt. Question referencing allows you abstract essential business logic, and reference it in future analysis. They are the LEGO blocks for your analysis.</p><p>Enter powerful question references.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="what-is-a-question-reference"></a>What is a question reference?<a class="hash-link" href="#what-is-a-question-reference" title="Direct link to heading">#</a></h2><p>Question reference is a lightweight modeling mechanism to grasp the nuances of your data. Rather than select from existing tables and views in your data warehouse, you can select from another question. Tellery will pull the code from question reference into dependent questions as a common table expression.</p><p>Question references show the title of the question by default. You can recognize a question reference by the highlight:</p><img src="/img/tutorial/question-reference.png"><p>For example, consider a question which defines <em>active customers</em>:</p><div class="wrapper_2eU_"><div class="title_1w1N"><div class="titleInner_3q5F"><svg class="icon_1r91" viewBox="0 0 12 16" version="1.1" width="12" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.5 5L10 7.5 7.5 10l-.75-.75L8.5 7.5 6.75 5.75 7.5 5zm-3 0L2 7.5 4.5 10l.75-.75L3.5 7.5l1.75-1.75L4.5 5zM0 13V2c0-.55.45-1 1-1h10c.55 0 1 .45 1 1v11c0 .55-.45 1-1 1H1c-.55 0-1-.45-1-1zm1 0h10V2H1v11z"></path></svg><span>active customers</span></div></div><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly sql"><div tabindex="0" class="prism-code language-sql codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#d6deeb;background-color:#011627"><div class="token-line" style="color:#d6deeb"><span class="token keyword" style="color:rgb(127, 219, 202)">select</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    date_trunc</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;day&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> occurred_at</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(127, 219, 202)">as</span><span class="token plain"> dt</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    date_trunc</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;year&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> occurred_at</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(127, 219, 202)">as</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(127, 219, 202)">year</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    region</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    gender</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    user_id</span></div><div class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token keyword" style="color:rgb(127, 219, 202)">from</span><span class="token plain"> fact_user_engagement</span></div><div class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token keyword" style="color:rgb(127, 219, 202)">where</span><span class="token plain"> event </span><span class="token operator" style="color:rgb(127, 219, 202)">in</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;add_to_cart&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;checkout&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div></div><p>This question captures the nuances of datasets and allows future analytics code to make meaningful choices on appropriate granularity of it.</p><p>The following question references it, applies specific filtering and grouping, and asks <em>what&#x27;s the number of daily active customers in 2021, by region</em>:</p><div class="wrapper_2eU_"><div class="title_1w1N"><div class="titleInner_3q5F"><svg class="icon_1r91" viewBox="0 0 12 16" version="1.1" width="12" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.5 5L10 7.5 7.5 10l-.75-.75L8.5 7.5 6.75 5.75 7.5 5zm-3 0L2 7.5 4.5 10l.75-.75L3.5 7.5l1.75-1.75L4.5 5zM0 13V2c0-.55.45-1 1-1h10c.55 0 1 .45 1 1v11c0 .55-.45 1-1 1H1c-.55 0-1-.45-1-1zm1 0h10V2H1v11z"></path></svg><span>the number of daily active customers in 2021, by region</span></div></div><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly sql"><div tabindex="0" class="prism-code language-sql codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#d6deeb;background-color:#011627"><div class="token-line" style="color:#d6deeb"><span class="token keyword" style="color:rgb(127, 219, 202)">select</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    dt</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> region</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">count</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="color:rgb(127, 219, 202)">distinct</span><span class="token plain"> user_id</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(127, 219, 202)">as</span><span class="token plain"> dau</span></div><div class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token keyword" style="color:rgb(127, 219, 202)">from</span><span class="token plain"> {{active customers}}</span></div><div class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token keyword" style="color:rgb(127, 219, 202)">where</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(127, 219, 202)">year</span><span class="token plain"> </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">2021</span><span class="token plain"> </span></div><div class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token keyword" style="color:rgb(127, 219, 202)">group</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(127, 219, 202)">by</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token number" style="color:rgb(247, 140, 108)">2</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="how-to-reference-questions"></a>How to reference questions?<a class="hash-link" href="#how-to-reference-questions" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="copy-their-urls"></a>Copy their URLs<a class="hash-link" href="#copy-their-urls" title="Direct link to heading">#</a></h3><p>To link things together, every block in Tellery has a url. We can reference a question by its block url.</p><p>The easiest way to reference a question is by having it in front of you. Move your mouse to the block and the <code>â‹®â‹®</code> icon will appear to the left of it. Click this handle, and then click &quot;Copy link&quot; button in the dropdown menu to copy its url to your clipboard.</p><p>If you paste the url in the question editor, it will be automatically recognized by Tellery.</p><video src="/img/tutorial/copy-address.mp4" controls=""></video><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="search-for-them"></a>Search for them<a class="hash-link" href="#search-for-them" title="Direct link to heading">#</a></h3><p>When editing SQL in the question editor, type double curly braces <code>{{</code> to invoke the question referencing.</p><p>Then start typing the name of the question you want to reference. Hit &quot;Enter&quot; to pull it in your editor when youâ€™ve found the question in the dropdown that appears.</p><video src="/img/tutorial/search-question-ref.mp4" controls=""></video><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="some-advice-on-transformation"></a>Some Advice on transformation<a class="hash-link" href="#some-advice-on-transformation" title="Direct link to heading">#</a></h2><p>Although transforming and re-shaping data can be very easy in Tellery, we recommend you govern transformations using a batch-based tool like <a href="https://www.getdbt.com/" target="_blank" rel="noopener noreferrer">dbt</a>. Because you can assure data quality and improve performance there.</p><p>You can start with the question referencing to reduce clutter when answering questions on new datasets. But after the logic being mature, it&#x27;s better to consolidate them in dbt to create a solid foundation that everyone can share.</p></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/tellery/website/edit/master/docs/how-to-use/question-referencing.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" role="img" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-label="Edit page"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/how-to-use/data-asset"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Data asset</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/how-to-use/shortcut"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Learn the shortcut Â»</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#what-is-a-question-reference" class="table-of-contents__link">What is a question reference?</a></li><li><a href="#how-to-reference-questions" class="table-of-contents__link">How to reference questions?</a><ul><li><a href="#copy-their-urls" class="table-of-contents__link">Copy their URLs</a></li><li><a href="#search-for-them" class="table-of-contents__link">Search for them</a></li></ul></li><li><a href="#some-advice-on-transformation" class="table-of-contents__link">Some Advice on transformation</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">For Developer</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs">Documentation</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/changelog">Changelog</a></li><li class="footer__item"><a href="https://github.com/tellery/tellery" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a href="mailto:contact@tellery.io" target="_blank" rel="noopener noreferrer" class="footer__link-item">Support</a></li><li class="footer__item"><a href="https://discord.gg/gAxqpvQUZV" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord</a></li><li class="footer__item"><a href="https://twitter.com/TelleryHQ" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter</a></li></ul></div></div><div class="footer__bottom text--center"></div></div></footer></div>
<script src="/assets/js/runtime~main.b7950fb1.js"></script>
<script src="/assets/js/main.625a2d6a.js"></script>
</body>
</html>